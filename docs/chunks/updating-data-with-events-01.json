{
  "id": "updating-data-with-events-01",
  "url": "https://dev.clever.com/docs/events-api",
  "path": "/docs/events-api",
  "section": "District Rostering (Secure Sync)",
  "title": "Updating Data with Events",
  "heading": "Updating Data with Events",
  "headingLevel": 0,
  "parentHeadings": [
    "Updating Data with Events"
  ],
  "content": "```json\n\"data\": {\n\t\"created\": \"2021-11-30T17:09:15.000Z\"\n\t\"data\": {\n\t\t\"object\": {\n\t\t\t\"created\": \"2021-11-25T17:06:03.838Z\"\n\t\t\t\"district\": \"58da8a43cc70ab00017a1a87\"\n\t\t\t\"email\": \"[emailÂ protected]\"\n\t\t\t\"id\": \"5fad6ba2b84acb058bf8dc22\"\n\t\t\t\"last_modified\": \"2021-11-25T17:06:03.838Z\"\n\t\t\t\"name\": {\n\t\t\t\t\"last\": \"Wanell Schmeler\"\n\t\t\t}\n\t\t\t\"roles\": {\n\t\t\t\t\"contact\": {\n\t\t\t\t\t\"legacy_id\": \"5f75fe4d64cf6b128cecda56\"\n\t\t\t\t\t\"phone\": \"\"\n\t\t\t\t\t\"phone_type\": \"Other\"\n\t\t\t\t\t\"relationship\": \"Other\"\n\t\t\t\t\t\"sis_id\": \"\"\n\t\t\t\t\t\"student_relationships\": [...]\n\t\t\t\t\t\"students\": [\n\t\t\t\t\t\t\"58da8c65d7dc0ca0680006b6\"\n\t\t\t\t\t]\n\t\t\t\t\t\"type\": \"Family\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\"id\": \"61a65abb7d8210097c2d9046\"\n\t\"type\": \"users.deleted\"\n}\n\"uri\": \"/v3.0/events/61a65abb7d8210097c2d9046\"\n}\n```\n\n## \n\nEvent ordering\n\n[](#event-ordering)\n\nClever generally receives batch data updates from districts that include a mix of creates, deletes, and updates. When we process the data from a batch, we intentionally sequence events to make it easy for your application to process the data. Hereâ€™s the ordering of events you should expect to see within a batch:\n\n> ## ðŸš§\n> \n> Please note: You will receive events in the order they are generated - in the case where a single sync / sharing change creates multiple events, we will order them as described below.\n> \n> Your integration should process events in the order they are received, **not** by event type.\n\n1.  Created\n    1.  districts.created\n    2.  users.created (District Admins)\n    3.  schools.created\n    4.  terms.created\n    5.  courses.created\n    6.  users.created (Students)\n    7.  users.created (Contacts)\n    8.  users.created (Teachers)\n    9.  sections.created\n    10.  users.created (Staff)\n2.  Updated\n    1.  districts.updated\n    2.  users.updated (District Admins)\n    3.  schools.updated\n    4.  terms.updated\n    5.  courses.updated\n    6.  users.updated (Students)\n    7.  users.updated (Contacts)\n    8.  users.updated (Teachers)\n    9.  sections.updated\n    10.  users.updated (Staff)\n3.  Deleted\n    1.  users.deleted (Staff)\n    2.  sections.deleted\n    3.  users.deleted (Teachers)\n    4.  users.deleted (Contacts)\n    5.  users.deleted (Students)\n    6.  terms.deleted\n    7.  courses.deleted\n    8.  schools.deleted\n    9.  users.deleted (District Admin)\n    10.  districts.deleted\n\n**Note:** You will only ever see one districts.created event per district-app token, and there is no event that will alert you to new districts being connected. districts.deleted events are technically generated, but in practice you will never see them as the district-app token will no longer be valid.\n\n**Note:** Changes to student and teacher enrollments are reflected in _sections.updated_ events, not users.updated events.\n\n## \n\nSetting up an events sync\n\n[](#setting-up-an-events-sync)\n\nRequests made directly to the `/events` endpoint are scoped to a single district based on the use of a district-app token for authorization.\n\nThis is the recommended flow for working with events:\n\n1.  Make a request to obtain the single most recent event and save its ID  \n    `GET https://api.clever.com/v3.0/events?ending_before=last&limit=1`\n2.  Perform an initial sync using the non-events endpoints: `districts`, `schools`, `users`, `sections`\n3.  On subsequent syncs, request the events that are \"new\" -- those that begin after the previously processed event `id`:  \n    `GET https://api.clever.com/v3.0/events?starting_after=<event id>`\n\n-   The `starting_after` parameter requires a valid event\\_id, so if there is no previously processed event, then omit the parameter\n-   If there are no events after that ID, we will return an empty array\n\n## \n\nSyncing events on a per-school basis\n\n[](#syncing-events-on-a-per-school-basis)\n\nWe now include a `school` parameter that you can use to retrieve all event records associated with a specific school. It will return events for resources where the specific school is listed as either a primary school (in the `school` field) or as a non-primary school (in the `students` array).\n\nUse of the `school` parameter does not apply to the following resources because they are associated with districts, not schools.\n\n-   Courses\n-   Terms\n-   Contacts\n\n## \n\nSyncing specific record types\n\n[](#syncing-specific-record-types)\n\nWe now provide the ability to query for specific record types (e.g. only users, or only sections). This can be helpful if you are only interested in updating data for specific data types. Otherwise, we generally recommend processing data from the event stream in the order we sequence it.\n\nIf you choose to use the `record_type` parameter, process events in the order below. Barring any constraints specific to your application, the order within groups does not matter (e.g. students vs. teachers).\n\n1.  Districts\n2.  Schools\n3.  Users\n4.  Contacts\n5.  Terms & Courses\n6.  Sections\n\n> ## ðŸš§\n> \n> If your sync uses events, you must still have the ability to resync via the Data API. This is because:\n> \n> -   During school year rollover, districts may generate more events than the total number of records in the district. In this case, doing a full data resync is more efficient than processing events\n> -   If for any reason your database no longer matches the data set in Clever, performing a full data resync is the only way to rematch the data sets.\n\n## \n\nProcessing events\n\n[](#processing-events)\n\nEvents must be processed in chronological order, as they are presented in our API. Processing events in a different order significantly increases the chances of sync errors.\n\nIn order to ensure parity, inspect the Clever ID of the object in your database before performing any action. See this flowchart for more detail:\n\n![1404](https://files.readme.io/9606d0f-events-flowchart.png \"events-flowchart.png\")",
  "tokenEstimate": 1446,
  "crawledAt": "2026-02-23T03:16:56.670Z",
  "fetchMethod": "static",
  "chunkIndex": 1,
  "totalChunks": 2
}